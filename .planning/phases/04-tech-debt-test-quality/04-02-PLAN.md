---
phase: 04-tech-debt-test-quality
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ProjectCard.tsx
  - src/components/Navbar.tsx
  - cypress/e2e/projects.cy.ts
autonomous: true
requirements:
  - TEST-02
  - TEST-07
  - IDEN-03

must_haves:
  truths:
    - 'Every Link and anchor element in the codebase has a data-cy attribute'
    - "ProjectCard 'Read case study' link has data-cy='project-card-link'"
    - "Mobile drawer GitHub link has data-cy='nav-mobile-github'"
    - "projects.cy.ts uses getBySel('project-card-link') instead of .find('a')"
  artifacts:
    - path: 'src/components/ProjectCard.tsx'
      provides: 'data-cy attribute on case study Link'
      contains: 'data-cy="project-card-link"'
    - path: 'src/components/Navbar.tsx'
      provides: 'data-cy attribute on mobile drawer GitHub link'
      contains: 'data-cy="nav-mobile-github"'
    - path: 'cypress/e2e/projects.cy.ts'
      provides: "Clean data-cy selector usage, no .find('a')"
  key_links:
    - from: 'cypress/e2e/projects.cy.ts'
      to: 'src/components/ProjectCard.tsx'
      via: "getBySel('project-card-link')"
      pattern: "getBySel\\('project-card-link'\\)"
---

<objective>
Add missing data-cy attributes and fix non-data-cy selectors in tests.

Purpose: Every interactive element must have a data-cy attribute (per Cypress best practices and TEST-02). Tests must never use CSS selectors, tag names, or `.find('a')` — only `getBySel()`. The mobile drawer GitHub link needs data-cy for IDEN-03 (GitHub access from navigation).

Output: ProjectCard.tsx with data-cy on Link, Navbar.tsx with data-cy on mobile GitHub link, projects.cy.ts using clean selectors.
</objective>

<execution_context>
@/Users/jacobstoragepug/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jacobstoragepug/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/ProjectCard.tsx
@src/components/Navbar.tsx
@cypress/e2e/projects.cy.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add missing data-cy attributes to components</name>
  <files>src/components/ProjectCard.tsx, src/components/Navbar.tsx</files>
  <action>
    **ProjectCard.tsx** (INT-02):
    Add `data-cy="project-card-link"` to the Link element inside ProjectCard. Currently the Link at the bottom of the card ("Read case study ->") has no data-cy attribute. Add it:

    ```tsx
    <Link
      data-cy="project-card-link"
      href={`/projects/${project.slug}`}
      ...
    >
    ```

    **Navbar.tsx** (INT-03):
    Add `data-cy="nav-mobile-github"` to the mobile drawer GitHub `<a>` element. This is the `<a>` tag around line 113 inside the drawer's nav links section. Currently it has no data-cy. The desktop GitHub link already has `data-cy="nav-github"` — the mobile variant needs its own attribute.

    ```tsx
    <a
      data-cy="nav-mobile-github"
      href="https://github.com/uphoffjs"
      ...
    >
    ```

    Do NOT change any styles, class names, or other attributes. Only add the data-cy attributes.

  </action>
  <verify>
    Read both files and confirm:
    1. ProjectCard.tsx Link has `data-cy="project-card-link"`
    2. Navbar.tsx mobile drawer `<a>` has `data-cy="nav-mobile-github"`
    3. No other changes were made to either file
    Run `npm run build` to confirm no build errors.
  </verify>
  <done>All Link and anchor elements in ProjectCard and Navbar mobile drawer have data-cy attributes</done>
</task>

<task type="auto">
  <name>Task 2: Fix non-data-cy selector in projects.cy.ts</name>
  <files>cypress/e2e/projects.cy.ts</files>
  <action>
    In `cypress/e2e/projects.cy.ts`, line 26 currently reads:

    ```ts
    cy.getBySel('project-card').first().find('a').click()
    ```

    Replace with:

    ```ts
    cy.getBySel('project-card').first().within(() => {
      cy.getBySel('project-card-link').click()
    })
    ```

    This eliminates the `.find('a')` tag selector in favor of the new `data-cy="project-card-link"` attribute added in Task 1.

    Also audit the entire file for any other non-data-cy selectors (`.find()`, `.get()` with tag/class selectors). There should be none besides the one on line 26, but verify.

  </action>
  <verify>
    1. Read `cypress/e2e/projects.cy.ts` and confirm no `.find('a')` or other non-data-cy selectors remain
    2. Grep all `.cy.ts` files for `.find(` to confirm zero violations across the entire test suite:
       `grep -rn '\.find(' cypress/e2e/`
  </verify>
  <done>All Cypress tests use exclusively getBySel() for element selection — zero CSS/tag selectors in the test suite</done>
</task>

</tasks>

<verification>
1. `grep -rn 'data-cy="project-card-link"' src/components/ProjectCard.tsx` returns a match
2. `grep -rn 'data-cy="nav-mobile-github"' src/components/Navbar.tsx` returns a match
3. `grep -rn '\.find(' cypress/e2e/` returns zero matches
4. `npm run build` succeeds
</verification>

<success_criteria>

- ProjectCard Link has data-cy="project-card-link"
- Navbar mobile GitHub link has data-cy="nav-mobile-github"
- projects.cy.ts uses getBySel('project-card-link') not .find('a')
- Zero non-data-cy selectors across all .cy.ts files
- Build passes
  </success_criteria>

<output>
After completion, create `.planning/phases/04-tech-debt-test-quality/04-02-SUMMARY.md`
</output>
