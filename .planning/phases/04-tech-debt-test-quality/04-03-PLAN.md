---
phase: 04-tech-debt-test-quality
plan: 03
type: execute
wave: 2
depends_on:
  - 04-02
files_modified:
  - cypress/e2e/homepage.cy.ts
  - cypress/e2e/404.cy.ts
  - cypress/e2e/responsive.cy.ts
  - cypress/e2e/navigation.cy.ts
autonomous: true
requirements:
  - TEST-02
  - TEST-03
  - IDEN-03

must_haves:
  truths:
    - 'Homepage hero, heading, skills preview, skill tags, CTA section, CTA-projects, and CTA-links all have E2E assertions'
    - '404 page renders on invalid URL, shows 404 code, and Back to Home link navigates to homepage'
    - 'Mobile drawer GitHub link is verified in responsive tests'
    - 'Footer GitHub link and nav logo are tested in navigation tests'
  artifacts:
    - path: 'cypress/e2e/homepage.cy.ts'
      provides: 'Homepage content E2E tests'
      min_lines: 30
    - path: 'cypress/e2e/404.cy.ts'
      provides: '404 page E2E tests with click-and-verify'
      min_lines: 15
    - path: 'cypress/e2e/responsive.cy.ts'
      provides: 'Mobile GitHub link test added'
    - path: 'cypress/e2e/navigation.cy.ts'
      provides: 'Footer GitHub and nav logo tests added'
  key_links:
    - from: 'cypress/e2e/homepage.cy.ts'
      to: 'src/app/page.tsx'
      via: 'data-cy selectors'
      pattern: 'home-hero|home-heading|home-skills-preview|home-skill-tag|home-cta-section|home-cta-projects|home-cta-links'
    - from: 'cypress/e2e/404.cy.ts'
      to: 'src/app/not-found.tsx'
      via: 'data-cy selectors + click navigation'
      pattern: 'not-found|not-found-code|not-found-home-link'
    - from: 'cypress/e2e/responsive.cy.ts'
      to: 'src/components/Navbar.tsx'
      via: "getBySel('nav-mobile-github')"
      pattern: 'nav-mobile-github'
---

<objective>
Create homepage and 404 E2E test specs, and add missing assertions to existing specs.

Purpose: Close the homepage/404 undertested gap from the v1 audit. All 16 untested data-cy attributes get at least one assertion. The 404 test uses click-and-verify (not just href check). Existing specs gain coverage for footer-github, nav-logo, and nav-mobile-github.

Output: New homepage.cy.ts, new 404.cy.ts, updated responsive.cy.ts and navigation.cy.ts.
</objective>

<execution_context>
@/Users/jacobstoragepug/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jacobstoragepug/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/page.tsx
@src/app/not-found.tsx
@src/components/Navbar.tsx
@src/components/Footer.tsx
@cypress/e2e/navigation.cy.ts
@cypress/e2e/responsive.cy.ts
@.planning/phases/04-tech-debt-test-quality/04-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create homepage.cy.ts and 404.cy.ts test specs</name>
  <files>cypress/e2e/homepage.cy.ts, cypress/e2e/404.cy.ts</files>
  <action>
    **Create `cypress/e2e/homepage.cy.ts`:**

    Test all 7 homepage data-cy attributes. Structure:

    ```
    describe('Homepage content', () => {
      beforeEach(() => { cy.visit('/') })

      it('renders hero section', () => {
        cy.getBySel('home-hero').should('be.visible')
      })

      it('renders heading with name', () => {
        cy.getBySel('home-heading').should('be.visible').and('contain.text', 'Jacob Uphoff')
      })

      it('renders skills preview section with skill tags', () => {
        cy.getBySel('home-skills-preview').should('be.visible')
        cy.getBySel('home-skill-tag').should('have.length.gte', 1)
      })

      it('renders CTA section with project and contact links', () => {
        cy.getBySel('home-cta-section').should('be.visible')
        cy.getBySel('home-cta-projects').should('be.visible').and('have.attr', 'href', '/projects')
        cy.getBySel('home-cta-links').should('be.visible').and('have.attr', 'href', '/links')
      })
    })
    ```

    Notes:
    - Do NOT test `home-cta` — it is already tested in `navigation.cy.ts` ("navigates from home to projects via CTA"). Avoid duplication.
    - Use `.and('contain.text', ...)` for the heading to verify content, not just visibility.
    - Use `.and('have.attr', 'href', ...)` for CTA links to verify they point to the right pages.

    **Create `cypress/e2e/404.cy.ts`:**

    Test all 3 not-found data-cy attributes with click-and-verify. Structure:

    ```
    describe('404 page', () => {
      beforeEach(() => {
        cy.visit('/this-page-does-not-exist/', { failOnStatusCode: false })
      })

      it('renders 404 container', () => {
        cy.getBySel('not-found').should('be.visible')
      })

      it('displays 404 code', () => {
        cy.getBySel('not-found-code').should('be.visible').and('contain.text', '404')
      })

      it('navigates back to home when clicking Back to Home link', () => {
        cy.getBySel('not-found-home-link').should('be.visible').click()
        cy.url().should('eq', Cypress.config('baseUrl') + '/')
        cy.getBySel('home-hero').should('be.visible')
      })
    })
    ```

    CRITICAL: Use `{ failOnStatusCode: false }` on `cy.visit()` — without it, Cypress will fail on the non-200 status code from the static export's 404 page.

    The click-and-verify test (per user decision) must: navigate to bad URL, assert 404 renders, click "Back to Home", assert homepage loads. Do NOT just check href.

  </action>
  <verify>
    1. Both files exist and use only `getBySel()` selectors
    2. `homepage.cy.ts` covers: home-hero, home-heading, home-skills-preview, home-skill-tag, home-cta-section, home-cta-projects, home-cta-links
    3. `404.cy.ts` uses `{ failOnStatusCode: false }` and includes click-and-verify
    4. Run full test suite: `npx serve out -l 4173 & sleep 3 && npx cypress run && kill %1` (or equivalent)
    5. All tests pass
  </verify>
  <done>Homepage and 404 pages have dedicated E2E specs covering all untested data-cy attributes, including click-and-verify for 404 "Back to Home"</done>
</task>

<task type="auto">
  <name>Task 2: Add missing assertions to existing test specs</name>
  <files>cypress/e2e/responsive.cy.ts, cypress/e2e/navigation.cy.ts</files>
  <action>
    **Update `cypress/e2e/responsive.cy.ts`:**

    Add a test for the mobile drawer GitHub link in the Mobile viewport context. This tests `data-cy="nav-mobile-github"` (added in Plan 02). Add after the existing "closes drawer when close button is clicked" test:

    ```ts
    it('mobile drawer has GitHub link with correct href', () => {
      cy.getBySel('nav-menu-button').click()
      cy.getBySel('nav-drawer').should('be.visible')
      cy.getBySel('nav-mobile-github')
        .should('be.visible')
        .and('have.attr', 'href')
        .and('include', 'github.com')
    })
    ```

    **Update `cypress/e2e/navigation.cy.ts`:**

    Add tests for `footer-github` and `nav-logo` which are currently untested. Add after the existing "navigates via navbar links" test:

    ```ts
    it('nav logo links to homepage', () => {
      cy.visit('/about/')
      cy.getBySel('nav-logo').should('be.visible').and('have.attr', 'href', '/')
      cy.getBySel('nav-logo').click()
      cy.url().should('eq', Cypress.config('baseUrl') + '/')
    })

    it('footer GitHub link has correct href', () => {
      cy.visit('/')
      cy.getBySel('footer-github')
        .should('have.attr', 'href')
        .and('include', 'github.com')
    })
    ```

    These additions ensure the 6 "scattered" untested data-cy attributes (nav-logo, footer-github, nav-mobile-github, plus the existing about-page, projects-page, links-page container selectors which are implicitly tested via page visits) all have explicit assertions.

  </action>
  <verify>
    1. Read both files and confirm new tests are added
    2. All new tests use only `getBySel()` selectors
    3. `grep -rn '\.find(' cypress/e2e/` still returns zero matches
    4. Run full test suite — all tests pass including new ones
  </verify>
  <done>footer-github, nav-logo, and nav-mobile-github all have explicit E2E assertions. Zero untested data-cy attributes remain.</done>
</task>

</tasks>

<verification>
1. `cypress/e2e/homepage.cy.ts` exists with tests for all 7 homepage data-cy attributes
2. `cypress/e2e/404.cy.ts` exists with click-and-verify for Back to Home navigation
3. `cypress/e2e/responsive.cy.ts` includes nav-mobile-github assertion
4. `cypress/e2e/navigation.cy.ts` includes footer-github and nav-logo assertions
5. Full Cypress suite passes (all existing + new tests)
6. `grep -rn '\.find(' cypress/e2e/` returns zero matches
</verification>

<success_criteria>

- 8 new test specs written (4 in homepage.cy.ts, 3 in 404.cy.ts, 1 in responsive.cy.ts, 2 in navigation.cy.ts — exact count may vary)
- All 16 previously untested data-cy attributes now have E2E coverage
- 404 test uses click-and-verify (not just href assertion)
- Full Cypress suite passes
- Zero non-data-cy selectors in entire test suite
  </success_criteria>

<output>
After completion, create `.planning/phases/04-tech-debt-test-quality/04-03-SUMMARY.md`
</output>
